<!DOCTYPE html>
<html lang="vi">
<head>
  <title>Mini game Thiên Tú</title>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <link rel="stylesheet" href="public/css/bootstrap.min.css" type="text/css" media="screen" />

  <link rel="stylesheet" href="public/style.css" type="text/css" media="screen">

<!--[if lt IE 9]>
    <script src="/js/html5shiv.js"></script>
  <![endif]-->
  <!--[if lt IE 9]>
  <script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
<![endif]-->
</head>
<body>
<header>
    <div class="container-fluid">
        <div class="row">
            <div class="col-md-12 col-sm-12 col-xs-12 parent">
                <div class="col-lg-3 col-md-3 col-sm-4 col-xs-12">
                    <img src="public/TTU-logo.jpg" class="logo" />
                </div>
               <div class="col-lg-6 col-md-6 col-sm-4 col-xs-12">
                   <h2 class="text-center">LUCKY DRAW</h2>
                </div>
                <div class="col-lg-3 col-md-3 col-sm-4 col-xs-12">
                    <img src="public/Logo_TTuFN.jpeg" class="logo" />
                </div>
            </div>
        </div>
    </div>
</header>
<section>
    <div class="container-fluid">
        <div class="row">
            <div class="col-md-12 col-xs-12 col-sm-12 btn-start" >
                 <div class="col-md-1 col-sm-1">
                    
                </div>
                <div class="col-md-2 col-sm-2 col-xs-12 text-center">
                    <button id="slotMachineButton1" class="slotMachineButton"><p>SILVER</p></button>
                </div>
                 <div class="col-md-2 col-sm-2 col-xs-12 text-center">
                    <button id="giai3" type="button" value="3" class="slotMachineButton"><p>TITAN</p></button>
                </div>
                <div class="col-md-2 col-sm-2 col-xs-12 text-center">
                    <button id="giai2" type="button" value="2" class="slotMachineButton"><p>GOLD</p></button>
                </div>
                
                 <div class="col-md-2 col-sm-2 col-xs-12 text-center">
                    <button id="giai1" type="button" value="1" class="slotMachineButton"><p>PLATINUM</p></button>
                </div>
                
                 <div class="col-md-2 col-sm-2 col-xs-12 text-center">
                    <button id="giaidacbiet" type="button" value="1000" class="slotMachineButton"><p>DIAMOND</p></button>
                </div>
                <div class="hidden">
                    <video id="video0" width="400" controls>
                        <source src="public/video/Silver-15s.mp3" type="video/mp4">
                    </video>
                     <video id="video3" width="400" controls>
                        <source src="public/video/Titan-20s.mp3" type="video/mp4">
                    </video>
                     <video id="video2" width="400" controls>
                        <source src="public/video/Gold-30s.mp3" type="video/mp4">
                    </video>
                     <video id="video1" width="400" controls>
                        <source src="public/video/Platinum-40s.mp3" type="video/mp4">
                    </video>
                     <video id="video1000" width="400" controls>
                        <source src="public/video/Diamond-60s.mp3" type="video/mp4">
                    </video>
                </div>

            </div>
        </div>
    </div>
    <div class="container-fluid">
        <div class="row result hidden-xs hidden-sm hidden-md">
            <div class="col-md-4 col-sm-4 col-xs-4">
                <ul id="machine1" class="slotMachine">
                    <li class="slot parent"><p class="slot0">0</p></li>
                    <li class="slot parent"><p class="slot1">1</p></li>
                    <li class="slot parent"><p class="slot2">2</p></li>
                    <li class="slot parent"><p class="slot3">3</p></li>
                    <li class="slot parent"><p class="slot4">4</p></li>
                    <li class="slot parent"><p class="slot5">5</p></li>
                    <li class="slot parent"><p class="slot6">6</p></li>
                    <li class="slot parent"><p class="slot7">7</p></li>
                    <li class="slot parent"><p class="slot8">8</p></li>
                    
                </ul>
            </div>
            <div class="col-md-4 col-sm-4 col-xs-4">
                <ul id="machine2" class="slotMachine">
                    <li class="slot parent"><p class="slot0">0</p></li>
                    <li class="slot parent" ><p class="slot1">1</p></li>
                    <li class="slot parent"><p class="slot2">2</p></li>
                    <li class="slot parent"><p class="slot3">3</p></li>
                    <li class="slot parent"><p class="slot4">4</p></li>
                    <li class="slot parent"><p class="slot5">5</p></li>
                    <li class="slot parent"><p class="slot6">6</p></li>
                    <li class="slot parent"><p class="slot7">7</p></li>
                    <li class="slot parent"><p class="slot8">8</p></li>
                    <li class="slot parent"><p class="slot9">9</p></li>
                </ul>
            </div>
            <div class="col-md-4 col-sm-4 col-xs-4">
                <ul id="machine3" class="slotMachine">
                    <li class="slot parent"><p class="slot0">0</p></li>
                    <li class="slot parent" ><p class="slot1">1</p></li>
                    <li class="slot parent"><p class="slot2">2</p></li>
                    <li class="slot parent"><p class="slot3">3</p></li>
                    <li class="slot parent"><p class="slot4">4</p></li>
                    <li class="slot parent"><p class="slot5">5</p></li>
                    <li class="slot parent"><p class="slot6">6</p></li>
                    <li class="slot parent"><p class="slot7">7</p></li>
                    <li class="slot parent"><p class="slot8">8</p></li>
                    <li class="slot parent"><p class="slot9">9</p></li>
                </ul>
            </div>
        </div>
    </div>
    <div class="container-fluid">
        <div class="row">
            <div class="col-md-12 col-xs-12 col-sm-12 midd-div hidden-xs hidden-sm hidden-md">
                <div class="col-md-4 col-sm-4 col-xs-12 "><h3 class="title">Lucky Number: </h3></div>
                <div class="col-md-8 col-sm-8 col-xs-12 show-result">
                    <h2><span id="machineResult"></span></h2>
                </div>
            </div>
        </div>
    </div>
</section>
<footer id="footer">
    <div class="container-fluid">
        <div class="row">
            <div class="col-md-12 col-sm-12 col-xs-12 copyright">
                <h6>COPYRIGHT @ THIEN TU COMPANY</h6>
            </div>
        </div>
    </div>

</footer>
    <script src="/jquery/dist/jquery.js"></script>
    <script src="/socket.io/socket.io.js"></script>

  <script type="text/javascript" src="/public/jquery.slotmachine.js"></script>
<script>  
     var socket = io.connect('http://192.168.8.171:4201');

     socket.on('connect', function(data) {
        socket.emit('join', 'Hello World from client');
     });
     var c_row = 0;  var rowar = new Array();
 function onComplete(active){
    
        switch(this.element[0].id){
            case 'machine1':                        
                $("#machine1Result").text("First Number: "+this.active);    
                str = str + this.active ; 
                tam = tam + this.active ; 
                $("#machineResult").text(str);  
                break;
            case 'machine2':
                $("#machine2Result").text("Second Number: "+this.active);
                str = str + this.active ; 
                tam = tam + this.active ; 
                $("#machineResult").text(str);
                break;
            case 'machine3':
                $("#machine3Result").text("Third Number: "+this.active);
                str = str + this.active ; 
               
                 str = str + '/ ';
                $("#machineResult").text(str);
                c_row = c_row + 1;
                tam = tam + this.active ; 
                rowar[c_row] = tam ;
               
                break;
            $("#machineResult").text(str);
            document.getElementById("slotMachineButton1").disabled = false;
        }
    }

    var machine1 = $("#machine1").slotMachine({
        active  : 0,
        delay   : 2000
    });
    
    var machine2 = $("#machine2").slotMachine({
        active  : 1,
        delay   : 2000
    });
    
    var machine3 = $("#machine3").slotMachine({
        active  : 2,
        delay   : 2500
    });
    var str = " "; 
    var tam = "";
socket.on('broad', function(data) {
 tam = "";
   
    var ketqua = $("#machineResult").text(" ");
    var g1 = document.getElementById("giai1");
    var g2 = document.getElementById("giai2");
    var g3 = document.getElementById("giai3");
     var g1000 = document.getElementById("giaidacbiet");
    var gkk = document.getElementById("slotMachineButton1");
    if( data == 1){
       console.log(data);
          g1.classList.add("disabled");
           g2.classList.add("none");
            g3.classList.add("none");
             g1000.classList.add("none");
              gkk.classList.add("none");
           setTimeout(function(){
            g1.classList.remove("disabled");
              g2.classList.remove("none");
                g3.classList.remove("none");
                  g1000.classList.remove("none");
                    gkk.classList.remove("none");
          
        }, 40500);
        var myVideo = document.getElementById("video1"); 
            myVideo.play();
        machine1.shuffle(5, onComplete);

        setTimeout(function(){
            machine2.shuffle(5, null);
        }, 3000);

        setTimeout(function(){
            machine2.shuffle(5, onComplete);
        }, 3000);

         setTimeout(function(){
            machine3.shuffle(5, null);
        }, 3000); 

        setTimeout(function(){
            machine3.shuffle(5, onComplete);
        }, 8000);
       
    }
    else if( data == 2){
         g1.classList.add("none");
           g2.classList.add("disabled");
            g3.classList.add("none");
             g1000.classList.add("none");
              gkk.classList.add("none");
           setTimeout(function(){
            g1.classList.remove("none");
              g2.classList.remove("disabled");
                g3.classList.remove("none");
                  g1000.classList.remove("none");
                    gkk.classList.remove("none");
          
        }, 30500);

        var myVideo = document.getElementById("video2"); 
            myVideo.play();
        machine1.shuffle(5, onComplete);
        setTimeout(function(){
            machine2.shuffle(5, onComplete);
        }, 1500);
        setTimeout(function(){
            machine3.shuffle(5, onComplete);
        }, 2000);
       
    }
    else if( data == 3){
        g1.classList.add("none");
           g2.classList.add("none");
            g3.classList.add("disabled");
             g1000.classList.add("none");
              gkk.classList.add("none");
           setTimeout(function(){
            g1.classList.remove("none");
              g2.classList.remove("none");
                g3.classList.remove("disabled");
                  g1000.classList.remove("none");
                    gkk.classList.remove("none");
          
        }, 20500);

        var myVideo = document.getElementById("video3"); 
            myVideo.play();
        machine1.shuffle(5, onComplete);
        setTimeout(function(){
            machine2.shuffle(5, onComplete);
        }, 500);
        setTimeout(function(){
            machine3.shuffle(5, onComplete);
        }, 1000);
       
    }
    else if( data == 1000){
        g1.classList.add("none");
           g2.classList.add("none");
            g3.classList.add("none");
             g1000.classList.add("disabled");
              gkk.classList.add("none");
           setTimeout(function(){
            g1.classList.remove("none");
              g2.classList.remove("none");
                g3.classList.remove("none");
                  g1000.classList.remove("disabled");
                    gkk.classList.remove("none");
          
        }, 30500);

         var myVideo = document.getElementById("video1000"); 
            myVideo.play();
        machine1.shuffle(5, onComplete);


        setTimeout(function(){
            machine2.shuffle(5, onComplete);
        }, 14000);

        
        setTimeout(function(){
            machine3.shuffle(5, onComplete);
        }, 60000);
      
       
    }
    else {
        g1.classList.add("none");
           g2.classList.add("none");
            g3.classList.add("none");
             g1000.classList.add("none");
              gkk.classList.add("disabled");
           setTimeout(function(){
            g1.classList.remove("none");
              g2.classList.remove("none");
                g3.classList.remove("none");
                  g1000.classList.remove("none");
                    gkk.classList.remove("disabled");
          
        }, 15500);

        var myVideo = document.getElementById("video0"); 
            myVideo.play();
        machine1.shuffle(5, onComplete);
        setTimeout(function(){
            machine2.shuffle(5, onComplete);
        }, 100);
        setTimeout(function(){
            machine3.shuffle(5, onComplete);
        }, 200);
        
    }
    event.preventDefault();

});

     $('#slotMachineButton1').click(function(e){
        document.getElementById("giai1").disabled = true;
            document.getElementById("giai2").disabled = true;
            document.getElementById("giai3").disabled = true;
            document.getElementById("giaidacbiet").disabled = true;
            document.getElementById("slotMachineButton1").disabled = true;
        setTimeout(function(){
            document.getElementById("giai1").disabled = false;
            document.getElementById("giai2").disabled = false;
            document.getElementById("giai3").disabled = false;
            document.getElementById("giaidacbiet").disabled = false;
            document.getElementById("slotMachineButton1").disabled = false;
        }, 15500);
       
         e.preventDefault();
         var message = $(this).val();
         socket.emit('messages', message);
     });

     $('#giai1').click(function(e){
        document.getElementById("giai1").disabled = true;
        document.getElementById("giai2").disabled = true;
        document.getElementById("giai3").disabled = true;
        document.getElementById("giaidacbiet").disabled = true;
        document.getElementById("slotMachineButton1").disabled = true;
        setTimeout(function(){
            document.getElementById("giai1").disabled = false;
            document.getElementById("giai2").disabled = false;
            document.getElementById("giai3").disabled = false;
            document.getElementById("giaidacbiet").disabled = false;
            document.getElementById("slotMachineButton1").disabled = false;
        }, 40500);
        e.preventDefault();
        var message = $(this).val();
     
        socket.emit('messages', message);
     });
     $('#giai2').click(function(e){
        document.getElementById("giai1").disabled = true;
        document.getElementById("giai2").disabled = true;
        document.getElementById("giai3").disabled = true;
        document.getElementById("giaidacbiet").disabled = true;
        document.getElementById("slotMachineButton1").disabled = true;
        setTimeout(function(){
            document.getElementById("giai1").disabled = false;
            document.getElementById("giai2").disabled = false;
            document.getElementById("giai3").disabled = false;
            document.getElementById("giaidacbiet").disabled = false;
            document.getElementById("slotMachineButton1").disabled = false;
        }, 30500);
        e.preventDefault();
        var message = $(this).val();
      
        socket.emit('messages', message);      
     });
      $('#giai3').click(function(e){
        document.getElementById("giai1").disabled = true;
        document.getElementById("giai2").disabled = true;
        document.getElementById("giai3").disabled = true;
        document.getElementById("giaidacbiet").disabled = true;
        document.getElementById("slotMachineButton1").disabled = true;
        setTimeout(function(){
            document.getElementById("giai1").disabled = false;
            document.getElementById("giai2").disabled = false;
            document.getElementById("giai3").disabled = false;
            document.getElementById("giaidacbiet").disabled = false;
            document.getElementById("slotMachineButton1").disabled = false;
        }, 20500);
        e.preventDefault();
        var message = $(this).val();
      
        socket.emit('messages', message);      
     });
     $('#giaidacbiet').click(function(e){
                             
        document.getElementById("giai1").disabled = true;
        document.getElementById("giai2").disabled = true;
        document.getElementById("giai3").disabled = true;
        document.getElementById("giaidacbiet").disabled = true;
        document.getElementById("slotMachineButton1").disabled = true;

        e.preventDefault();
        var message = $(this).val();
      
        socket.emit('messages', message);      
     });
</script>  

    </body>
</html>  